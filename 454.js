"use strict";(self.webpackChunkPokeTool=self.webpackChunkPokeTool||[]).push([[454],{7454:(se,v,l)=>{l.r(v),l.d(v,{TrainerModule:()=>ae});var m=l(9808),M=l(8555),U=l(655),u=l(1474),e=l(5e3),h=l(4807),C=l(5750),y=l(6428),A=l(1824),Z=l(9224),c=l(7322),T=l(4107),d=l(3075),_=l(508),J=l(7423);function P(n,o){if(1&n&&(e.TgZ(0,"div",7)(1,"h3",8),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.trainer.name?t.trainer.name:"??????????")}}function I(n,o){if(1&n&&e._UZ(0,"img",9),2&n){const t=e.oxw();e.Q6J("src",t.sprite,e.LSH)}}let O=(()=>{class n{constructor(t){this.trainerService=t}ngOnInit(){this.loadSprite()}setCurrentSprite(t){this.sprite=t}ngOnChanges(t){t&&t.trainer&&this.loadSprite()}loadSprite(){console.log(this.trainer.uid),this.sprite=this.trainerService.loadSprite(this.trainer.spriteId,!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.hc))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trainer-card"]],inputs:{trainer:"trainer"},features:[e.TTD],decls:11,vars:2,consts:[[1,"mb-3"],[1,"d-inline-flex","justify-content-center","w-100"],["class","poke-border-sm bg-gray p-3 mb-3",4,"ngIf"],[1,"poke-sprite-circle","d-inline-flex","justify-content-center","w-100","mb-3"],["width","100%","height","auto",3,"src",4,"ngIf"],["mat-flat-button","","color","accent","disabled","",1,"w-100","mb-2"],["mat-flat-button","","color","accent","disabled","",1,"w-100"],[1,"poke-border-sm","bg-gray","p-3","mb-3"],[1,"mb-0","font-p2"],["width","100%","height","auto",3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1),e.YNc(2,P,3,1,"div",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,I,1,1,"img",4),e.qZA(),e.TgZ(5,"button",5),e._uU(6,"Change Name"),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Trainer Sprite"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Editor Settings"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",r.trainer),e.xp6(2),e.Q6J("ngIf",r.sprite))},directives:[Z.a8,m.O5,J.lW],styles:[".poke-sprite-circle[_ngcontent-%COMP%]{border-radius:50%;background-color:#eaf5ff}.poke-sprite-small[_ngcontent-%COMP%]{background-color:#f7f5c580;display:inline-flex;justify-content:center;align-items:center}.poke-sprite-circle-big[_ngcontent-%COMP%]{border-radius:50%;background-color:#fffeeb80;position:absolute;height:100%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}.poke-sprite-small[_ngcontent-%COMP%]:hover{cursor:pointer;border:2px solid #349dff}.poke-sprite-active[_ngcontent-%COMP%]{cursor:pointer;background-color:#eaf5ff;border:2px solid #349dff;border-radius:8px}#monster-data[_ngcontent-%COMP%]{height:100%;position:relative}.monster-background[_ngcontent-%COMP%]{position:absolute;image-rendering:pixelated;opacity:.35;width:auto;height:100%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}"]}),n})();var x=l(3251),b=l(7531),w=l(7446);function Q(n,o){if(1&n&&(e.TgZ(0,"mat-option",4),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.hij(" ",t," ")}}let q=(()=>{class n{constructor(t){this.trainerService=t,this.trainerUpdated=new e.vpe}ngOnInit(){}trainerChanged(){this.trainerUpdated.emit(this.trainer)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.hc))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trainer-options-tool"]],inputs:{trainer:"trainer"},outputs:{trainerUpdated:"trainerUpdated"},decls:35,vars:10,consts:[[1,"row"],[1,"col-6","mt-3"],["appearance","fill",1,"w-100"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","matInput","","placeholder","0",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6"],[1,"w-100","d-flex","flex-column","poke-border-sm","bg-gray","p-3","mt-3"],[1,"mt-3",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Gender"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.genderId=a})("ngModelChange",function(){return r.trainerChanged()}),e.TgZ(6,"mat-option",4),e._uU(7,"Male"),e.qZA(),e.TgZ(8,"mat-option",4),e._uU(9,"Female"),e.qZA()()()(),e.TgZ(10,"div",1)(11,"mat-form-field",2)(12,"mat-label"),e._uU(13,"Class"),e.qZA(),e.TgZ(14,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.trainerClass=a})("ngModelChange",function(){return r.trainerChanged()}),e.YNc(15,Q,2,2,"mat-option",5),e.qZA()()(),e.TgZ(16,"div",1)(17,"mat-form-field",2)(18,"mat-label"),e._uU(19,"Music"),e.qZA(),e.TgZ(20,"input",6),e.NdJ("ngModelChange",function(a){return r.trainer.musicId=a})("ngModelChange",function(){return r.trainerChanged()}),e.qZA()()(),e.TgZ(21,"div",1)(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"AI"),e.qZA(),e.TgZ(25,"input",6),e.NdJ("ngModelChange",function(a){return r.trainer.ai=a})("ngModelChange",function(){return r.trainerChanged()}),e.qZA()()()(),e.TgZ(26,"div",0)(27,"div",7)(28,"div",8)(29,"mat-checkbox",3),e.NdJ("ngModelChange",function(a){return r.trainer.isDoubleBattle=a})("ngModelChange",function(){return r.trainerChanged()}),e._uU(30,"Double Battle"),e.qZA(),e.TgZ(31,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return r.trainer.hasHeldItems=a})("ngModelChange",function(){return r.trainerChanged()}),e._uU(32,"Held Items"),e.qZA(),e.TgZ(33,"mat-checkbox",9),e.NdJ("ngModelChange",function(a){return r.trainer.hasCustomMoves=a})("ngModelChange",function(){return r.trainerChanged()}),e._uU(34,"Custom Moves"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngModel",r.trainer.genderId),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(6),e.Q6J("ngModel",r.trainer.trainerClass),e.xp6(1),e.Q6J("ngForOf",r.trainerService.classNames),e.xp6(5),e.Q6J("ngModel",r.trainer.musicId),e.xp6(5),e.Q6J("ngModel",r.trainer.ai),e.xp6(4),e.Q6J("ngModel",r.trainer.isDoubleBattle),e.xp6(2),e.Q6J("ngModel",r.trainer.hasHeldItems),e.xp6(2),e.Q6J("ngModel",r.trainer.hasCustomMoves))},directives:[c.KE,c.hX,T.gD,d.JJ,d.On,_.ey,m.sg,d.qQ,d.wV,b.Nt,d.Fj,w.oG],styles:[""]}),n})();function N(n,o){if(1&n&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.uid),e.xp6(1),e.hij(" ",t.name," ")}}function F(n,o){if(1&n&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.uid),e.xp6(1),e.hij(" ",t.name," ")}}function Y(n,o){if(1&n&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.uid),e.xp6(1),e.hij(" ",t.name," ")}}function k(n,o){if(1&n&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.uid),e.xp6(1),e.hij(" ",t.name," ")}}let H=(()=>{class n{constructor(t,r){this.itemService=t,this.trainerService=r,this.trainerUpdated=new e.vpe}ngOnInit(){}trainerChanged(){this.trainerUpdated.emit(this.trainer)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.e),e.Y36(h.hc))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trainer-items-tool"]],inputs:{trainer:"trainer"},outputs:{trainerUpdated:"trainerUpdated"},decls:25,vars:8,consts:[[1,"row"],[1,"col-6","mt-3"],["appearance","fill",1,"w-100"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Item 1"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.items[0]=a})("ngModelChange",function(){return r.trainerChanged()}),e.YNc(6,N,2,2,"mat-option",4),e.qZA()()(),e.TgZ(7,"div",1)(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Item 2"),e.qZA(),e.TgZ(11,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.items[1]=a})("ngModelChange",function(){return r.trainerChanged()}),e.YNc(12,F,2,2,"mat-option",4),e.qZA()()(),e.TgZ(13,"div",1)(14,"mat-form-field",2)(15,"mat-label"),e._uU(16,"Item 3"),e.qZA(),e.TgZ(17,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.items[2]=a})("ngModelChange",function(){return r.trainerChanged()}),e.YNc(18,Y,2,2,"mat-option",4),e.qZA()()(),e.TgZ(19,"div",1)(20,"mat-form-field",2)(21,"mat-label"),e._uU(22,"Item 4"),e.qZA(),e.TgZ(23,"mat-select",3),e.NdJ("ngModelChange",function(a){return r.trainer.items[3]=a})("ngModelChange",function(){return r.trainerChanged()}),e.YNc(24,k,2,2,"mat-option",4),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("ngModel",r.trainer.items[0]),e.xp6(1),e.Q6J("ngForOf",r.itemService.items),e.xp6(5),e.Q6J("ngModel",r.trainer.items[1]),e.xp6(1),e.Q6J("ngForOf",r.itemService.items),e.xp6(5),e.Q6J("ngModel",r.trainer.items[2]),e.xp6(1),e.Q6J("ngForOf",r.itemService.items),e.xp6(5),e.Q6J("ngModel",r.trainer.items[3]),e.xp6(1),e.Q6J("ngForOf",r.itemService.items))},directives:[c.KE,c.hX,T.gD,d.JJ,d.On,m.sg,_.ey],styles:[""]}),n})();function B(n,o){if(1&n&&e._UZ(0,"img",15),2&n){const t=e.oxw().$implicit;e.Q6J("src",t,e.LSH)}}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).setCurrentPartyMonster(a)}),e.YNc(2,B,1,1,"img",14),e.qZA()()}if(2&n){const t=o.$implicit,r=o.index,i=e.oxw(2);e.xp6(1),e.ekj("poke-sprite-active",r===i.selectedPartyMonsterId),e.xp6(1),e.Q6J("ngIf",t)}}function D(n,o){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,j,3,3,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.currentPartySprites)}}const E=function(n,o){return{"border-bottom":n,"poke-tool-sidenav-item-active":o}};function L(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().setCurrentPartyMonster(a)}),e.TgZ(1,"div",17)(2,"div",18)(3,"div",19)(4,"p",7),e._uU(5),e.qZA()()(),e.TgZ(6,"div",18)(7,"div",19)(8,"p",7),e._uU(9),e.qZA()()()()()}if(2&n){const t=o.$implicit,r=o.index,i=e.oxw();e.Q6J("ngClass",e.WLB(3,E,r!==i.trainer.party.length-1,i.selectedPartyMonster==t)),e.xp6(5),e.Oqu(i.monsterService.monsters[t.species].name),e.xp6(4),e.Oqu(t.level)}}function R(n,o){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.hij(" ",t.name," ")}}function $(n,o){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.hij(" ",t.name," ")}}function X(n,o){1&n&&(e.TgZ(0,"mat-hint"),e._uU(1,"Disabled"),e.qZA())}function V(n,o){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.hij(" ",t," ")}}function z(n,o){1&n&&(e.TgZ(0,"mat-hint"),e._uU(1,"Disabled"),e.qZA())}function G(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-form-field",21)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-select",25),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).index;return e.oxw(2).selectedPartyMonster.customMoves[s]=i})("ngModelChange",function(){return e.CHM(t),e.oxw(2).currentPartyMonsterChanged()}),e.YNc(5,V,2,2,"mat-option",23),e.qZA(),e.YNc(6,z,2,0,"mat-hint",9),e.qZA()()}if(2&n){const t=o.index,r=e.oxw(2);e.xp6(3),e.hij("Custom Move #",t+1,""),e.xp6(1),e.Q6J("ngModel",r.selectedPartyMonster.customMoves[t])("disabled",!r.trainer.hasCustomMoves),e.xp6(1),e.Q6J("ngForOf",r.monsterService.moveNames),e.xp6(1),e.Q6J("ngIf",!r.trainer.hasCustomMoves)}}function K(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"div",20)(3,"mat-form-field",21)(4,"mat-label"),e._uU(5,"Species"),e.qZA(),e.TgZ(6,"mat-select",22),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedPartyMonster.species=i})("ngModelChange",function(){return e.CHM(t),e.oxw().currentPartyMonsterChanged()}),e.YNc(7,R,2,2,"mat-option",23),e.qZA()()()(),e.TgZ(8,"div",17)(9,"div",18)(10,"mat-form-field",21)(11,"mat-label"),e._uU(12,"Level"),e.qZA(),e.TgZ(13,"input",24),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedPartyMonster.level=i})("ngModelChange",function(){return e.CHM(t),e.oxw().currentPartyMonsterChanged()}),e.qZA(),e.TgZ(14,"mat-hint"),e._uU(15,"0-100"),e.qZA()()(),e.TgZ(16,"div",18)(17,"mat-form-field",21)(18,"mat-label"),e._uU(19,"Held Item"),e.qZA(),e.TgZ(20,"mat-select",25),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedPartyMonster.heldItem=i})("ngModelChange",function(){return e.CHM(t),e.oxw().currentPartyMonsterChanged()}),e.YNc(21,$,2,2,"mat-option",23),e.qZA(),e.YNc(22,X,2,0,"mat-hint",9),e.qZA()()(),e.TgZ(23,"div",17),e.YNc(24,G,7,5,"div",26),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.selectedPartyMonster.species),e.xp6(1),e.Q6J("ngForOf",t.monsterService.monsters),e.xp6(6),e.Q6J("ngModel",t.selectedPartyMonster.level),e.xp6(7),e.Q6J("ngModel",t.selectedPartyMonster.heldItem)("disabled",!t.trainer.hasHeldItems),e.xp6(1),e.Q6J("ngForOf",t.itemService.items),e.xp6(1),e.Q6J("ngIf",!t.trainer.hasHeldItems),e.xp6(2),e.Q6J("ngForOf",t.selectedPartyMonster.customMoves)}}let W=(()=>{class n{constructor(t,r,i){this.gbaService=t,this.monsterService=r,this.itemService=i,this.trainerUpdated=new e.vpe,this.currentPartySprites=new Array(6),this.currentPartyOriginalAddress=0,this.selectedPartyMonsterId=0}ngOnInit(){}ngOnChanges(t){t&&t.trainer&&(this.trainer.partyCount=this.getCurrentPartySize(),this.updatePartySprites(),this.currentPartyOriginalAddress=this.trainer.partyAddress,this.trainer.party&&this.trainer.party.length>0&&this.setCurrentPartyMonster(0))}trainerChanged(){this.trainerUpdated.emit(this.trainer)}updatePartySprites(){this.currentPartySprites=[];for(let t=0;t<this.trainer.partyCount;t++)this.currentPartySprites[t]=this.monsterService.loadBattleSprite(this.trainer.party[t].species,!0,!1)}setCurrentPartyMonster(t){this.selectedPartyMonsterId=t,this.selectedPartyMonster=this.trainer.party[t]}currentPartyMonsterChanged(){this.updatePartySprites();let t=new u.jo;t.key=this.trainer.uid+"-trainer-changed",t.changeReason=this.trainer.name+" (ID: "+this.trainer.uid+") Trainer Party Data Changed",t.address=this.currentPartyOriginalAddress,t.bytesBefore=this.trainer.partyData;let r=this.trainer.hasCustomMoves?16:8,i=this.getCurrentPartySize(),a=new ArrayBuffer(r*i),s=new DataView(a);for(let p=0;p<i;p++){let g=p*r;if(s.setUint16(g,this.trainer.party[p].evs,!0),s.setUint16(g+2,this.trainer.party[p].level,!0),s.setUint16(g+4,this.trainer.party[p].species,!0),s.setUint16(g+6,this.trainer.hasHeldItems?this.trainer.party[p].heldItem:0,!0),this.trainer.hasCustomMoves)for(let f=0;f<this.trainer.party[p].customMoves.length;f++)s.setUint16(g+8+2*f,this.trainer.party[p].customMoves[f],!0)}a.byteLength>t.bytesBefore.length&&(t.repointAddress=this.gbaService.findFreeSpaceAddresses(s.byteLength,1)[0],t.repointAt=[this.trainer.address+36],this.trainer.partyAddress=t.repointAddress),t.bytesToWrite=new Uint8Array(a),this.gbaService.queueChange(t),this.trainerChanged()}getCurrentPartySize(){let t=0;for(let r=0;r<this.trainer.party.length;r++)this.trainer.party[r].species>0&&this.trainer.party[r].level>0&&t++;return t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.VP),e.Y36(y.hP),e.Y36(C.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trainer-party-tool"]],inputs:{trainer:"trainer"},outputs:{trainerUpdated:"trainerUpdated"},features:[e.TTD],decls:17,vars:5,consts:[["class","w-100 d-inline-flex",4,"ngIf"],[1,"row","my-3"],[1,"col-md-6"],[1,"w-100","border","poke-border-sm","mb-4"],[1,"w-100","px-2","border-bottom","overflow-x-hidden","overflow-y-hidden"],[1,"row","bg-gray","poke-border-top-sm"],[1,"col-6","pt-2"],[1,"mb-0"],["class","w-100 py-2 cursor-pointer","matRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"w-100","d-inline-flex"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"poke-border-sm","poke-sprite-small","mr-3",3,"click"],["width","64px","height","64px",3,"src",4,"ngIf"],["width","64px","height","64px",3,"src"],["matRipple","",1,"w-100","py-2","cursor-pointer",3,"ngClass","click"],[1,"row"],[1,"col-6"],[1,"px-2"],[1,"col-12"],["appearance","fill",1,"w-100"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","max","100","matInput","","placeholder","0",3,"ngModel","ngModelChange"],[3,"ngModel","disabled","ngModelChange"],["class","col-6",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(e.YNc(0,D,2,1,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7)(8,"b"),e._uU(9,"Species"),e.qZA()()(),e.TgZ(10,"div",6)(11,"h2",7)(12,"b"),e._uU(13,"Level"),e.qZA()()()()(),e.YNc(14,L,10,6,"div",8),e.qZA()(),e.TgZ(15,"div",2),e.YNc(16,K,25,8,"div",9),e.qZA()()),2&t&&(e.Q6J("ngIf",r.currentPartySprites&&r.currentPartySprites.length>0),e.xp6(5),e.Udp("min-height","52px"),e.xp6(9),e.Q6J("ngForOf",r.trainer.party),e.xp6(2),e.Q6J("ngIf",r.selectedPartyMonster))},directives:[m.O5,m.sg,_.wG,m.mk,c.KE,c.hX,T.gD,d.JJ,d.On,_.ey,d.qQ,d.Fd,d.wV,b.Nt,d.Fj,c.bx],styles:[""]}),n})();function ee(n,o){if(1&n&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name?t.name:"??????????")}}function te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-select",12),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().currentTrainer=i})("ngModelChange",function(){e.CHM(t);const i=e.oxw();return i.setCurrent(i.currentTrainer)}),e.YNc(1,ee,2,2,"mat-option",13),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.currentTrainer),e.xp6(1),e.Q6J("ngForOf",t.trainerService.trainers)}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e._UZ(2,"img",17),e.qZA(),e.TgZ(3,"mat-card",18)(4,"h3",19)(5,"b"),e._uU(6,"Pick a Tool"),e.qZA()(),e.TgZ(7,"mat-tab-group")(8,"mat-tab",20)(9,"app-trainer-options-tool",21),e.NdJ("trainerUpdated",function(i){return e.CHM(t),e.oxw().updateTrainer(i)}),e.qZA()(),e.TgZ(10,"mat-tab",22)(11,"app-trainer-items-tool",21),e.NdJ("trainerUpdated",function(i){return e.CHM(t),e.oxw().updateTrainer(i)}),e.qZA()(),e.TgZ(12,"mat-tab",23)(13,"app-trainer-party-tool",21),e.NdJ("trainerUpdated",function(i){return e.CHM(t),e.oxw().updateTrainer(i)}),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",t.sprite,e.LSH),e.xp6(7),e.Q6J("trainer",t.currentTrainer),e.xp6(2),e.Q6J("trainer",t.currentTrainer),e.xp6(2),e.Q6J("trainer",t.currentTrainer)}}const re=[{path:"",component:(()=>{class n{constructor(t,r,i,a,s){this.gbaService=t,this.trainerService=r,this.itemService=i,this.monsterService=a,this.characterSetService=s,this.trainerSpriteCount=93}ngOnInit(){this.gbaService.isLoaded()&&this.loadTrainers(),this.gbaService.romLoaded.subscribe(()=>{this.loadTrainers()}),this.trainerService.trainerIndexChanged.subscribe(t=>{this.setCurrent(this.trainerService.trainers[t])})}loadTrainers(){return(0,U.mG)(this,void 0,void 0,function*(){this.trainerSpriteCount=this.gbaService.constants().TRAINER_SPRITE_COUNT,(!this.itemService.items||0==this.itemService.items.length)&&this.itemService.loadItems(),(!this.monsterService.monsters||0==this.monsterService.monsters.length)&&this.monsterService.loadMonsters(),this.trainerService.loadTrainers(),this.trainerService.isLoaded=!0,this.currentTrainer||this.setCurrent(this.trainerService.trainers[this.trainerService.cachedTrainerIndex])})}setCurrent(t){t&&(this.currentTrainer=t),this.updateTrainerSprite()}updateTrainerSprite(){this.sprite=this.trainerService.loadSprite(this.currentTrainer.spriteId,!0)}updateTrainer(t){this.currentTrainer=t,this.trainerChanged()}trainerChanged(){this.updateTrainerSprite();let t=new u.jo;t.key=this.currentTrainer.address+"-changed",t.changeReason=this.currentTrainer.name+" Trainer Data Changed",t.address=this.currentTrainer.address,t.bytesBefore=this.currentTrainer.data;let r=new ArrayBuffer(40),i=new DataView(r);i.setUint8(0,(this.currentTrainer.hasCustomMoves?1:0)+(this.currentTrainer.hasHeldItems?2:0)),i.setUint8(1,this.currentTrainer.trainerClass),i.setUint8(2,(this.currentTrainer.genderId<<7)+this.currentTrainer.musicId),i.setUint8(3,this.currentTrainer.spriteId);let a=this.characterSetService.toBytes(this.currentTrainer.name);for(let s=0;s<a.length;s++)i.setUint8(4+s,a[s]);i.setUint8(4+a.length,255);for(let s=0;s<4;s++)i.setUint16(16+2*s,this.currentTrainer.items[s],!0);i.setUint8(24,this.currentTrainer.isDoubleBattle?1:0),i.setUint8(25,t.bytesBefore[25]),i.setUint8(26,t.bytesBefore[26]),i.setUint8(27,t.bytesBefore[27]),i.setUint32(28,this.currentTrainer.ai,!0),i.setUint8(32,this.currentTrainer.partyCount),i.setUint8(33,t.bytesBefore[33]),i.setUint8(34,t.bytesBefore[34]),i.setUint8(35,t.bytesBefore[35]),i.setUint32(36,this.gbaService.toPointer(this.currentTrainer.partyAddress),!0),t.bytesToWrite=new Uint8Array(r),this.gbaService.queueChange(t)}getPaddedId(t){let r=t.toString();for(;r.length<3;)r="0"+r;return r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.VP),e.Y36(h.hc),e.Y36(C.e),e.Y36(y.hP),e.Y36(A.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-trainer"]],decls:16,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-3"],[1,"col-md-3"],["id","search"],[1,"mb-3","pb-0"],["for","search",1,"mb-2"],["appearance","fill",1,"w-100","pb-0"],["name","search",3,"ngModel","ngModelChange",4,"ngIf"],["id","trainer-card"],[3,"trainer"],[1,"col-md-9"],["id","editable-data",4,"ngIf"],["name","search",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","editable-data"],[1,"poke-sprite-circle-big","phone-or-bigger"],[1,"editable-background",3,"src"],[1,"mb-3"],[1,"mb-2"],["label","Options"],[3,"trainer","trainerUpdated"],["label","Items"],["label","Party"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"h3",5)(6,"b"),e._uU(7,"Pick an Trainer"),e.qZA()(),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Selected Trainer"),e.qZA(),e.YNc(11,te,2,2,"mat-select",7),e.qZA()()(),e.TgZ(12,"div",8),e._UZ(13,"app-trainer-card",9),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,ne,14,4,"div",11),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("ngIf",r.trainerService.trainers&&r.trainerService.isLoaded),e.xp6(2),e.Q6J("trainer",r.currentTrainer),e.xp6(2),e.Q6J("ngIf",r.sprite))},directives:[Z.a8,c.KE,c.hX,m.O5,T.gD,d.JJ,d.On,m.sg,_.ey,O,x.SP,x.uX,q,H,W],styles:[""]}),n})()}];let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[M.Bz.forChild(re)],M.Bz]}),n})();var oe=l(4202);let ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,d.u5,oe.q,ie]]}),n})()}}]);