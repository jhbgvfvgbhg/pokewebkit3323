"use strict";(self.webpackChunkPokeTool=self.webpackChunkPokeTool||[]).push([[920],{6920:(w,c,o)=>{o.r(c),o.d(c,{BattlefieldModule:()=>P});var s=o(9808),u=o(8555),h=o(655),g=o(1474),e=o(5e3),m=o(4208),p=o(9224),r=o(7322),v=o(4107),f=o(3075),C=o(508),T=o(7423);function Z(a,n){if(1&a&&(e.TgZ(0,"div",8)(1,"h3",9),e._uU(2),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(t.battlefield.name)}}function B(a,n){if(1&a&&e._UZ(0,"img",10),2&a){const t=e.oxw();e.Q6J("src",t.battlefield.backgroundImage,e.LSH)}}let A=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-battlefield-card"]],inputs:{battlefield:"battlefield"},decls:10,vars:2,consts:[[1,"mb-3"],[1,"d-inline-flex","justify-content-center","w-100"],["class","poke-border-sm bg-gray p-3 mb-3",4,"ngIf"],[1,"w-100"],[1,"poke-sprite-circle","d-inline-flex","justify-content-center","w-100","mb-3"],["class","w-100 poke-border-sm",3,"src",4,"ngIf"],["mat-flat-button","","color","accent","disabled","",1,"w-100","mb-2"],["mat-flat-button","","color","accent","disabled","",1,"w-100"],[1,"poke-border-sm","bg-gray","p-3","mb-3"],[1,"mb-0","font-p2"],[1,"w-100","poke-border-sm",3,"src"]],template:function(t,l){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1),e.YNc(2,Z,3,1,"div",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e.YNc(5,B,1,1,"img",5),e.qZA()(),e.TgZ(6,"button",6),e._uU(7,"Change Name"),e.qZA(),e.TgZ(8,"button",7),e._uU(9,"Editor Settings"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",l.battlefield),e.xp6(3),e.Q6J("ngIf",l.battlefield.backgroundImage))},directives:[p.a8,s.O5,T.lW],styles:[".poke-sprite-circle[_ngcontent-%COMP%]{border-radius:50%;background-color:#eaf5ff}.poke-sprite-small[_ngcontent-%COMP%]{background-color:#f7f5c580;display:inline-flex;justify-content:center;align-items:center}.poke-sprite-circle-big[_ngcontent-%COMP%]{border-radius:50%;background-color:#fffeeb80;position:absolute;height:100%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}.poke-sprite-small[_ngcontent-%COMP%]:hover{cursor:pointer;border:2px solid #349dff}.poke-sprite-active[_ngcontent-%COMP%]{cursor:pointer;background-color:#eaf5ff;border:2px solid #349dff;border-radius:8px}#monster-data[_ngcontent-%COMP%]{height:100%;position:relative}.monster-background[_ngcontent-%COMP%]{position:absolute;image-rendering:pixelated;opacity:.35;width:auto;height:100%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}"]}),a})();var b=o(3251),_=o(7531);let y=(()=>{class a{constructor(t){this.battlefieldService=t,this.battlefieldUpdated=new e.vpe}ngOnInit(){}battlefieldChanged(){this.battlefieldUpdated.emit(this.battlefield)}getInputHexValue(t){let l=t.target.value,d=0;return/[0-9A-Fa-f]{6}/g.test(l)&&(d=Number.parseInt(l,16)),d}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-battlefield-general-tool"]],inputs:{battlefield:"battlefield"},outputs:{battlefieldUpdated:"battlefieldUpdated"},decls:36,vars:5,consts:[[1,"row"],[1,"col-6"],["appearance","fill",1,"w-100","mt-3"],["type","text","matInput","","placeholder","0",3,"value","change"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Background Image Address"),e.qZA(),e.TgZ(5,"input",3),e.NdJ("change",function(d){return l.battlefield.backgroundAddress=l.getInputHexValue(d),l.battlefieldChanged()}),e.qZA(),e.TgZ(6,"mat-hint"),e._uU(7,"Hexidecimal big endian"),e.qZA()()(),e.TgZ(8,"div",1)(9,"mat-form-field",2)(10,"mat-label"),e._uU(11,"Background Tilemap Address"),e.qZA(),e.TgZ(12,"input",3),e.NdJ("change",function(d){return l.battlefield.backgroundTileAddress=l.getInputHexValue(d),l.battlefieldChanged()}),e.qZA(),e.TgZ(13,"mat-hint"),e._uU(14,"Hexidecimal big endian"),e.qZA()()(),e.TgZ(15,"div",1)(16,"mat-form-field",2)(17,"mat-label"),e._uU(18,"Entry Image Address"),e.qZA(),e.TgZ(19,"input",3),e.NdJ("change",function(d){return l.battlefield.entryImageAddress=l.getInputHexValue(d),l.battlefieldChanged()}),e.qZA(),e.TgZ(20,"mat-hint"),e._uU(21,"Hexidecimal big endian"),e.qZA()()(),e.TgZ(22,"div",1)(23,"mat-form-field",2)(24,"mat-label"),e._uU(25,"Entry Tilemap Address"),e.qZA(),e.TgZ(26,"input",3),e.NdJ("change",function(d){return l.battlefield.entryImageTileAddress=l.getInputHexValue(d),l.battlefieldChanged()}),e.qZA(),e.TgZ(27,"mat-hint"),e._uU(28,"Hexidecimal big endian"),e.qZA()()(),e.TgZ(29,"div",1)(30,"mat-form-field",2)(31,"mat-label"),e._uU(32,"Palette Address"),e.qZA(),e.TgZ(33,"input",3),e.NdJ("change",function(d){return l.battlefield.paletteAddress=l.getInputHexValue(d),l.battlefieldChanged()}),e.qZA(),e.TgZ(34,"mat-hint"),e._uU(35,"Hexidecimal big endian"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("value",l.battlefield.backgroundAddress.toString(16).toUpperCase()),e.xp6(7),e.Q6J("value",l.battlefield.backgroundTileAddress.toString(16).toUpperCase()),e.xp6(7),e.Q6J("value",l.battlefield.entryImageAddress.toString(16).toUpperCase()),e.xp6(7),e.Q6J("value",l.battlefield.entryImageTileAddress.toString(16).toUpperCase()),e.xp6(7),e.Q6J("value",l.battlefield.paletteAddress.toString(16).toUpperCase()))},directives:[r.KE,r.hX,_.Nt,r.bx],styles:[""]}),a})();function U(a,n){if(1&a&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}function x(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-select",12,13),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().currentBattlefield=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().setCurrent(i.index)}),e.YNc(2,U,2,2,"mat-option",14),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("ngModel",t.currentBattlefield),e.xp6(2),e.Q6J("ngForOf",t.battlefieldService.battlefields)}}function S(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",16)(1,"mat-card",17)(2,"h3",18)(3,"b"),e._uU(4,"Pick a Tool"),e.qZA()(),e.TgZ(5,"mat-tab-group")(6,"mat-tab",19)(7,"app-battlefield-general-tool",20),e.NdJ("battlefieldUpdated",function(i){return e.CHM(t),e.oxw().updateBattlefield(i)}),e.qZA()()()()()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("battlefield",t.currentBattlefield)}}const I=[{path:"",component:(()=>{class a{constructor(t,l){this.gbaService=t,this.battlefieldService=l,this.zoom=2,this.isShowingEntryOverlay=!0,this.gbaService.isLoaded()&&this.loadBattlefields(),this.gbaService.romLoaded.subscribe(()=>{this.loadBattlefields()})}loadBattlefields(){return(0,h.mG)(this,void 0,void 0,function*(){this.currentBattlefield||this.setCurrent(0)})}setCurrent(t,l){console.log(t),console.log(l),this.currentBattlefield=l||this.battlefieldService.loadBattlefield(t)}updateBattlefield(t){this.setCurrent(t.index,t),this.battlefieldChanged()}battlefieldChanged(){let t=new g.jo;t.key=this.currentBattlefield.address+"-changed",t.changeReason=this.currentBattlefield.name+" Battlefield Data Changed",t.address=this.currentBattlefield.address,t.bytesBefore=this.currentBattlefield.data;let l=new ArrayBuffer(20),i=new DataView(l);i.setUint32(0,this.gbaService.toPointer(this.currentBattlefield.backgroundAddress),!0),i.setUint32(4,this.gbaService.toPointer(this.currentBattlefield.backgroundTileAddress),!0),i.setUint32(8,this.gbaService.toPointer(this.currentBattlefield.entryImageAddress),!0),i.setUint32(12,this.gbaService.toPointer(this.currentBattlefield.entryImageTileAddress),!0),i.setUint32(16,this.gbaService.toPointer(this.currentBattlefield.paletteAddress),!0),t.bytesToWrite=new Uint8Array(l),this.gbaService.queueChange(t)}getPaddedId(t){let l=t.toString();for(;l.length<3;)l="0"+l;return l}changeZoom(){this.zoom<3?this.zoom++:this.zoom=1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.VP),e.Y36(m.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-battlefield"]],decls:16,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-3"],[1,"col-md-3"],["id","search"],[1,"mb-3","pb-0"],["for","search",1,"mb-2"],["appearance","fill",1,"w-100","pb-0"],["name","search",3,"ngModel","ngModelChange",4,"ngIf"],["id","battlefield-card"],[3,"battlefield"],[1,"col-md-9"],["id","editable-data",4,"ngIf"],["name","search",3,"ngModel","ngModelChange"],["battlefieldSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","editable-data"],[1,"mb-3"],[1,"mb-2"],["label","General"],[3,"battlefield","battlefieldUpdated"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"h3",5)(6,"b"),e._uU(7,"Pick a Battlefield"),e.qZA()(),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Selected Battlefield"),e.qZA(),e.YNc(11,x,3,2,"mat-select",7),e.qZA()()(),e.TgZ(12,"div",8),e._UZ(13,"app-battlefield-card",9),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,S,8,1,"div",11),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("ngIf",l.battlefieldService.battlefields&&l.battlefieldService.isLoaded),e.xp6(2),e.Q6J("battlefield",l.currentBattlefield),e.xp6(2),e.Q6J("ngIf",l.currentBattlefield))},directives:[p.a8,r.KE,r.hX,s.O5,v.gD,f.JJ,f.On,s.sg,C.ey,A,b.SP,b.uX,y],styles:[""]}),a})()}];let J=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[u.Bz.forChild(I)],u.Bz]}),a})();var M=o(4202);let P=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[s.ez,f.u5,M.q,J]]}),a})()}}]);